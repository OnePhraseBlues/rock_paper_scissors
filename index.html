<!DOCTYPE html>
<html>
    <head>
        <title>Janken!</title>
        <meta charset="UTF-8"/>
    </head>
    <style>
        .container {
            display: flex;
            align-items: center;
            align-content: center;
            justify-content: center;
            margin: auto;
        }

        #vcontainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            align-content: center;
            justify-content: center;
            margin: auto;
        }
        
        ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
        }
    </style>
    <header>

    </header>
    <body>
        <div id="vcontainer">
        <div><h1 id="heading">Choose your destiny:</h1></div>
        <div id="container">
            <div id="buttonInterface">
            </div>
            <div></div>
        </div>
        </div>
        <script>
            const rock = "rock";
            const paper = "paper";
            const scissors = "scissors";
            const win = "win";
            const loss = "loss";
            const tie = "tie";
			var score = [0, 0, 0];
			var play = "";
			
            const vcontainer = document.getElementById('vcontainer');
			const container = document.getElementById('container');
			const buttonInterface = document.getElementById('buttonInterface');

			const startButton = document.createElement('button');
			const rockButton = document.createElement('button');
			const paperButton = document.createElement('button');
			const scissorsButton = document.createElement('button');
			const restartButton = document.createElement('button');
			startButton.textContent = "Start!";
			rockButton.textContent = "Rock";
			paperButton.textContent = "Paper";
			scissorsButton.textContent = "Scissors";
			restartButton.textContent = "Run it back!";
			buttonInterface.append(startButton);
			
			startButton.addEventListener('click', startGame);
			rockButton.addEventListener('click', () => (play = playerPlay(rock)));
			paperButton.addEventListener('click', () => (play = playerPlay(paper)));
			scissorsButton.addEventListener('click', () => (play = playerPlay(scissors)));
			restartButton.addEventListener('click', restartGame);
			

            const response = document.createElement('div');
            response.style.marginTop = '20px';
            vcontainer.append(response);

            const scoreboard = document.createElement('ul');
            scoreboard.style.marginTop = '20px';
            vcontainer.append(scoreboard);

            let scoreboardArray = [];
            for (let loopCounter = 0; loopCounter <= 2; ++loopCounter) {
                scoreboardArray.push(document.createElement('li'));
				scoreboardArray[loopCounter].classList.add('scoreboard-item');
				switch (loopCounter) {
					case 0:
						scoreboardArray[0].textContent = `Player: ${score[0]}`
					break;
					
					case 1:
						scoreboardArray[1].textContent = `CPU: ${score[1]}`
					break;
					
					case 2:
						scoreboardArray[2].textContent = `Ties: ${score[2]}`
					break;
				}
            }

            const heading = document.querySelector('#heading');
			
			function startGame() {
				buttonInterface.replaceChildren();
				buttonInterface.append(rockButton, paperButton, scissorsButton);
				game();
			}
			
			function restartGame() {
				buttonInterface.replaceChildren();
				buttonInterface.append(rockButton, paperButton, scissorsButton);
				score.fill(0);
				heading.textContent = "Choose your destiny:";
				game();
			}
			
            function computerPlay() {
                let computerHand = Math.floor(Math.random() * 100);
                switch(true) {
                    case (computerHand % 3 === 0):
                        return rock;
                    break;
                    
                    case (computerHand % 3 === 1):
                        return paper;
                    break;

                    case (computerHand % 3 === 2):
                        return scissors;
                    break;
                }
            }

            function playerPlay(buttonChoice) {
                switch(buttonChoice) {
                    case rock:
                        return rock;
                    break;

                    case paper:
                        return paper;
                    break;

                    case scissors:
                        return scissors;
                    break;
                    }
                }

            function playRound(playerSelection, computerSelection) {
                let result = playerSelection + computerSelection;
                let returnString = "";

                if(playerSelection === computerSelection){
                    returnString = `${playerSelection} ties with ${computerSelection}!`
                    result = tie;
                }
                else {
                     switch(result) {
                        case "rockpaper":
                            returnString = "You lose! Rock gets covered by paper.";
                            result = loss;
                        break;

                        case "rockscissors":
                            returnString = "You win! Rock smashes over scissors.";
                            result = win;
                        break;

                        case "paperrock":
                            returnString = "Paper covers up rock. You win!";
                            result = win;
                        break;
                        
                        case "paperscissors":
                            returnString = "Paper gets sliced by scissors. You lose!";
                            result = loss;
                        break;

                        case "scissorsrock":
                            returnString = "Scissors get smashed by rock. You lose!";
                            result = loss;
                        break;

                        case "scissorspaper":
                            returnString = "Scissors slices up paper. You win!";
                            result = win;
                        break;
                     }
                }
                return [returnString, result];
            }

            function game() {
                let resultsArray = [];
				scoreboard.textContent = `Current score: `;
                do {
                    resultsArray = playRound(play, computerPlay());
                    switch(resultsArray[1]) {
                        case win:
                            score[0]++;
                        break;

                        case loss:
                            score[1]++;
                        break;

                        case tie:
                            score[2]++;
                        break;
                    }
                response.textContent = (resultsArray[0]);
                }
				while (score[0] < 5 || score[1] < 5)

                if(score[0] > score[1]) {
                    heading.textContent = 'Winner Winner Chicken Dinner!!!';
                }
                else {
                    heading.textContent = 'Better RNG next time!';
                }
                scoreboard.textContent = `Final score: `;
            }
        </script>
    </body>
    <footer>

    </footer>
</html>
