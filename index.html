<!DOCTYPE html>
<html>
    <head>
        <title>Janken!</title>
        <meta charset="UTF-8"/>
    </head>
    <style>
        .container {
            display: flex;
            align-items: center;
            align-content: center;
            justify-content: center;
            margin: auto;
        }

        #vcontainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            align-content: center;
            justify-content: center;
            margin: auto;
        }
        
        ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
        }
    </style>
    <header>

    </header>
    <body>
        <div id='vcontainer'>
        <div><h1 id="heading">Choose your destiny:</h1></div>
        <div class=container>
            <div id="buttonInterface">
                <button id=rock>Rock</button>
                <button id=paper>Paper</button>
                <button id=scissors>Scissors</button>
            </div>
            <div></div>
        </div>
        </div>
        <script>
            const rock = "rock";
            const paper = "paper";
            const scissors = "scissors";
            const win = "win";
            const loss = "loss";
            const tie = "tie";

            const buttons = document.querySelectorAll('button');
            buttons.forEach((button) => {
                button.addEventListener('click', () => {
                    game(button.id)
                });
            });

            const container = document.querySelector('#vcontainer');

            const response = document.createElement('div');
            response.classList.add('content');
            response.style.marginTop = '20px';
            container.appendChild(response);

            const scoreboard = document.createElement('ul');
            scoreboard.classList.add('content');
            scoreboard.style.marginTop = '20px';
            container.appendChild(scoreboard);

            let scoreboardArray = [];
            const scoreboardItem = document.createElement('li');
            for (let loopCounter = 1; loopCounter <= 3; ++loopCounter) {
                scoreboardArray.push(scoreboardItem);
            }
            scoreboardArray.forEach(() => {scoreboard.appendChild(...scoreboardArray)});

            const heading = document.querySelector('#heading');

            function computerPlay() {
                let computerHand = Math.floor(Math.random() * 100);
                switch(true) {
                    case (computerHand % 3 === 0):
                        return rock;
                    break;
                    
                    case (computerHand % 3 === 1):
                        return paper;
                    break;

                    case (computerHand % 3 === 2):
                        return scissors;
                    break;
                }
            }

            function playerPlay(buttonChoice) {
                switch(buttonChoice) {
                    case rock:
                        return rock;
                    break;

                    case paper:
                        return paper;
                    break;

                    case scissors:
                        return scissors;
                    break;
                    }
                }

            function playRound(playerSelection, computerSelection) {
                let result = playerSelection + computerSelection;
                let returnString = "";

                if(playerSelection === computerSelection){
                    returnString = `${playerSelection} ties with ${computerSelection}!`
                    result = tie;
                }
                else {
                     switch(result) {
                        case "rockpaper":
                            returnString = "You lose! Rock gets covered by paper.";
                            result = loss;
                        break;

                        case "rockscissors":
                            returnString = "You win! Rock smashes over scissors.";
                            result = win;
                        break;

                        case "paperrock":
                            returnString = "Paper covers up rock. You win!";
                            result = win;
                        break;
                        
                        case "paperscissors":
                            returnString = "Paper gets sliced by scissors. You lose!";
                            result = loss;
                        break;

                        case "scissorsrock":
                            returnString = "Scissors get smashed by rock. You lose!";
                            result = loss;
                        break;

                        case "scissorspaper":
                            returnString = "Scissors slices up paper. You win!";
                            result = win;
                        break;
                     }
                }
                return [returnString, result];
            }

            function game(playerSelection) {
                let score = [0, 0, 0];
                let resultsArray = [];
                for (gameCounter = 1; gameCounter <= 5; ++gameCounter) {
                    resultsArray = playRound(playerPlay(playerSelection), computerPlay());
                    switch(resultsArray[1]) {
                        case win:
                            score[0]++;
                        break;

                        case loss:
                            score[1]++;
                        break;

                        case tie:
                            score[2]++;
                        break;
                    }
                response.textContent = (resultsArray[0]);
                scoreboard.textContent = `Current score: `;
                scoreboardArray[0].textContent = `Player: ${score[0]}`;
                scoreboardArray[1].textContent = `CPU: ${score[1]}`;
                scoreboardArray[2].textContent = `Ties: ${score[2]}`;
                }

                if(score[0] > score[1]) {
                    heading.textContent = 'Winner Winner Chicken Dinner!!!';
                }
                else {
                    heading.textContent = 'Better RNG next time!';
                }
                scoreboard.textContent = `Final score: `;
            }
        </script>
    </body>
    <footer>

    </footer>
</html>